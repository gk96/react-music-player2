{"version":3,"sources":["services/PlayerService.js","context/AppContext.js","components/MiniPlayer/MiniPlayer.js","components/RelatedVideos/RelatedVideos.js","components/SeekBar/SeekBar.js","components/Player3/Player3.js","pages/PlayerPage/PlayerPage.js","pages/SearchPage/SearchPage.js","components/CardSlider/CardSlider.js","pages/HomePage/HomePage.js","Routes.js","components/Footer/Footer.js","App.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["videoId","context","a","url","process","encodeURIComponent","audio","Audio","crossOrigin","play","console","log","fetch","method","headers","body","JSON","stringify","then","res","text","audioUrl","me","src","getVideoInfo","response","json","URL","createObjectURL","mediaSource","videoUrl","reader","getReader","chunks","sourceBuffer","addSourceBuffer","getMIMEType","ext","acodec","mode","result","done","read","push","value","buffer","length","updating","sourceBuffers","appendBuffer","shift","e","addEventListener","readyState","undefined","endOfStream","PlayerService","setPlayButton","audioState","pause","extension","codecs","setSource","setAudioSource","setAudioUrl","setPlayerApperance","playerState","preventDefault","document","getElementsByClassName","style","height","transform","AppContext","React","createContext","store","createElement","MediaSource","searchResult","relatedVideos","menuOpen","snackbarMsg","themeSelectValue","currentSongDetails","testProp","bufferState","relatedVideoSourceId","searchKey","previousTrack","nextTrack","nextTrackId","trendingSongs","pickedSongs","reducer","state","action","type","snippet","ContextWrapper","props","globalStore","useReducer","Provider","children","MiniPlayer","useContext","dispatch","history","useHistory","openPlayer","trackTitle","albumArtUrl","setTimeout","useEffect","className","onClick","class","alt","id","CircularProgress","stopPropagation","playAudio","RelatedVideos","useState","setRelatedVideos","toggleAccordian","setToggleAccordian","loading","setLoading","trackChange","r","removeSourceBuffer","title","thumbnails","at","getElementById","width","left","removeAttribute","load","videos","openRelatedVideos","fontSize","map","to","pathname","SeekBar","mousedownFired","setMouseDownFired","progress","duration","i","buffered","start","currentTime","end","toFixed","timeupdate","onMouseDown","shiftX","clientX","getBoundingClientRect","onMouseMove","event","newLeft","rightEdge","offsetWidth","onMouseUp","removeEventListener","display","clientWidth","onDragStart","onTouchStart","Player3","useParams","songDuration","setSongDuration","seekbarDuration","setSeekbarDuration","loadedmetadata","changeTrack","trackSelect","catch","err","window","onpopstate","Object","keys","navigator","mediaSession","metadata","MediaMetadata","artwork","sizes","setActionHandler","parseInt","toString","toLocaleString","minimumIntegerDigits","useGrouping","IconButton","PlayerPage","setPlayerState","float","textDecoration","SearchPage","searchItems","setSearchItems","setInput","searchLoader","setSearchLoader","setSearchKey","debouncedChangeHandler","useCallback","_","debounce","target","placeholder","onChange","paddingTop","selectSong","default","CardSlider","items","handleClick","cardItems","setCardItems","item","Card","CardActionArea","imageUrl","CardMedia","component","image","objectFit","CardContent","HomePage","routes","key","trendingItems","setTrendingItems","pickedItems","setPickedItems","getSearchResult","filteredResponse","filter","convertDurationToNumber","duration_raw","val","high","arr","split","seconds","CardSkeleton","cardNumber","flexDirection","justifyContent","Array","from","Box","sx","pt","margin","Skeleton","variant","path","Footer","find","x","App","networkStatus","setNetworkStatus","location","useLocation","parse","localStorage","getItem","onLine","setItem","exact","includes","Snackbar","anchorOrigin","vertical","horizontal","message","autoHideDuration","open","Boolean","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.d047513f.chunk.js","sourcesContent":["import ytdl from 'ytdl-core';\r\n\r\nconst PlayerService = {\r\n  setPlayButton: setPlayButton,\r\n  getVideoInfo: getVideoInfo,\r\n  getMIMEType: getMIMEType,\r\n  setSource : onSourceOpen,\r\n  setAudioSource: setAudioSource,\r\n  setAudioUrl: setAudioUrl,\r\n  setPlayerApperance: SetPlayerApperance\r\n}\r\n\r\nfunction setPlayButton(me, audioState){\r\n  switch(audioState){\r\n      case \"paused\":\r\n        me.pause();\r\n        break;\r\n      case \"playing\":\r\n        me.play();\r\n        break;\r\n      default:\r\n        break;\r\n  }\r\n}\r\n\r\nfunction setAudioState(ctx, audioState){\r\n  switch(audioState){\r\n      case \"paused\":\r\n        ctx.audioState = \"paused\"\r\n        break;\r\n      case \"playing\":\r\n        ctx.audioState = \"playing\"\r\n        break;\r\n      case \"error\":\r\n        console.log(\"setting error flag\")\r\n        ctx.audioState = \"error\"\r\n        break;\r\n      default:\r\n        break;\r\n  }\r\n}\r\n\r\nfunction SetPlayerApperance(e, playerState){\r\n  switch(playerState){\r\n    case \"max\":\r\n      e.preventDefault()\r\n      document.getElementsByClassName(\"mini-player\")[0].style.height = 'calc(500%)'\r\n      document.getElementsByClassName(\"mini-player\")[0].style.transform = 'translateY(calc(-300%))'\r\n      break;\r\n    case \"min\":\r\n      e.preventDefault();\r\n      document.getElementsByClassName(\"playerContainer\")[0].style.transform = 'translateY(calc(100%))';\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nasync function setAudioSource(videoId, context){\r\n   let url = `${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player2?videoUrl=${encodeURIComponent(`https://www.youtube.com/watch?v=${videoId}`)}`\r\n  // context.me.src = `${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player2?videoUrl=${encodeURIComponent(`https://www.youtube.com/watch?v=${videoId}`)}`\r\n  // context.me.autoplay=true;\r\n  // context.me.controls = false;\r\n  // context.me.setAttribute('crossorigin', '');\r\n  // document.body.appendChild(context.me);\r\n\r\n  var audio = new Audio(url)\r\n  audio.crossOrigin = \"anonymous\"\r\n  audio.play()\r\n  console.log(audio)\r\n  //context.me.play()\r\n}\r\n\r\nasync function setAudioUrl(videoId, context){\r\n\r\n  // let info = await ytdl.getInfo(videoId);\r\n  // console.log(info)\r\n  // let format = ytdl.chooseFormat(info.formats, { quality: 'lowestaudio' });\r\n  // console.log('Format found!', format);\r\n\r\n  // console.log(format?.url)\r\n  // context.me.src = format?.url;\r\n  // // context.me.autoplay = true;\r\n  // context.me.play()\r\n\r\n\r\n   await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player3?videoId=${videoId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      videoId: videoId,\r\n    }),\r\n  })\r\n  .then(res => {\r\n    return res.text().then(audioUrl => {\r\n        console.log(audioUrl)\r\n        context.me.src = audioUrl;\r\n      })\r\n      \r\n      // return audioUrl;\r\n      // context.me.autoplay = true;\r\n      //context.me.play()\r\n    \r\n  })\r\n  // await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player3?videoId=${videoId}`, {\r\n  //   method: 'POST',\r\n  //   headers: {\r\n  //     'Content-Type': 'application/json'\r\n  //   },\r\n  //   body: JSON.stringify({\r\n  //     videoId: videoId,\r\n  //   }),\r\n  // })\r\n  // .then(res => {\r\n  //   res.text().then(audioUrl => {\r\n  //     console.log(audioUrl)\r\n  //     context.me.src = audioUrl;\r\n  //     // context.me.autoplay = true;\r\n  //     context.me.play()\r\n  //   })\r\n  // })\r\n    \r\n    // context.me.addEventListener(\"load\", function() { \r\n    //   context.me.play(); \r\n    // }, true);\r\n    \r\n}\r\n\r\nasync function getVideoInfo(videoId){\r\n    \r\n  let response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/search-by-id`, {\r\n    //'http://192.168.0.103:3003/api/get-video-details', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      // url : 'https://www.youtube.com/watch?v=7G7umMPwlO4',\r\n      videoId: videoId,\r\n    }),\r\n  });\r\n\r\n  return await response.json()\r\n}\r\n\r\nfunction getMIMEType(extension, codecs){\r\n  switch(extension){\r\n    case 'webm' : return `audio/${extension};codecs=${codecs}`;\r\n    case 'm4a' : return `audio/mp4;codecs=${codecs}`;\r\n    default : return `audio/webm;codecs=opus`;\r\n  }\r\n}\r\n\r\nasync function onSourceOpen(videoId, context){\r\n  context.me.src = URL.createObjectURL(context?.mediaSource)\r\n  let res = await getVideoInfo(videoId)\r\n  console.log(res)\r\n\r\n  //console.log(\"sourceopen\")\r\n  fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player1`, {\r\n    // 'http://192.168.0.103:3003/api/download-video-parts', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n  },\r\n  body: JSON.stringify({\r\n    // videoUrl:  res.url,\r\n    videoUrl: \"https://www.youtube.com/watch?v=\" + videoId\r\n  }),\r\n})\r\n.then(async (response) => {\r\n  let reader = response.body.getReader();\r\n  let chunks = [];\r\n  let sourceBuffer = context.mediaSource.addSourceBuffer(this.getMIMEType(res.ext, res.acodec))\r\n  // let sourceBuffer = mediaSource.addSourceBuffer('audio/webm;codecs=opus')\r\n  let result;\r\n  sourceBuffer.mode = 'sequence';\r\n\r\n  while(!result?.done) {\r\n  //   const {done, value} = await reader.read();\r\n    result = await reader.read();\r\n    // If it's done, there will be no value\r\n\r\n    chunks.push(result?.value?.buffer);\r\n    if((sourceBuffer != null || undefined) && chunks.length > 0 && !sourceBuffer.updating && (chunks[0] != null || undefined)){\r\n\r\n          if (context.mediaSource?.sourceBuffers[0] != null || undefined){\r\n              try{\r\n                  sourceBuffer?.appendBuffer(chunks.shift())\r\n              }\r\n              catch(e){\r\n                  // console.log(e)\r\n              }\r\n              \r\n          }\r\n      // }\r\n      // setLoading(false)\r\n    //   dispatch({type: \"setAudioState\", snippet: {\r\n    //     audioState: \"loaded\"\r\n    // }});\r\n       \r\n    }\r\n\r\n    if (result?.done) {\r\n\r\n      console.log(\"Fetch Data Complete..\")\r\n      sourceBuffer.addEventListener('updateend', function (){\r\n        if (!sourceBuffer.updating && context.mediaSource.readyState === 'open') {  \r\n          if(chunks.length > 0 && !sourceBuffer.updating && (chunks[0] != null || undefined)){\r\n            console.log(\"Remaining chunks =>\", chunks.length)\r\n            console.log(chunks)\r\n            console.log(sourceBuffer.updating)\r\n            if (sourceBuffer !== undefined){\r\n            sourceBuffer.appendBuffer(chunks.shift())\r\n            }\r\n        }\r\n        else if (sourceBuffer != null && ((chunks[0] == null || undefined) || chunks.length <=0) && !sourceBuffer.updating){\r\n          console.log(\"stream end\")\r\n          context.mediaSource.endOfStream(); \r\n        }        \r\n        }\r\n      })\r\n      break;\r\n    }\r\n  }\r\n  return chunks\r\n})\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default PlayerService","import React, { useReducer } from 'react';\r\nimport PlayerService from '../services/PlayerService';\r\n\r\nexport const AppContext = React.createContext(null);\r\n\r\nvar store = {\r\n    me: document.createElement('audio'),\r\n    mediaSource: new MediaSource(),\r\n    sourceBuffer: null,\r\n    searchResult: null,\r\n    relatedVideos: null,\r\n    menuOpen: false,\r\n    snackbarMsg: false,\r\n    themeSelectValue: \"Default\",\r\n    currentSongDetails: {},\r\n    testProp: {},\r\n    audioState: \"paused\",\r\n    bufferState: \"loading\",\r\n    playerState: null,\r\n    relatedVideoSourceId: \"\",\r\n    searchKey: \"\",\r\n    previousTrack: {},\r\n    nextTrack:{},\r\n    nextTrackId: \"\",\r\n    trendingSongs: null,\r\n    pickedSongs: null,\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n    switch (action.type){\r\n        case \"setCurrentSong\":\r\n            return{\r\n                ...state,\r\n                currentSongDetails: action.snippet\r\n            };\r\n        \r\n        case \"setRelatedVideos\": \r\n            return {\r\n                ...state,\r\n                relatedVideos: action.snippet\r\n            };\r\n        \r\n        case \"setThemeSelectValue\":\r\n            return {\r\n                ...state,\r\n                themeSelectValue: action.snippet\r\n            };\r\n        case \"setAudioState\":\r\n            PlayerService.setPlayButton(store.me, action.snippet);\r\n            return {\r\n                ...state,\r\n                audioState: action.snippet\r\n            };\r\n        case \"setBufferState\":\r\n            return {\r\n                ...state,\r\n                bufferState: action.snippet\r\n            };\r\n        case \"setPlayerState\":\r\n            return {\r\n                ...state,\r\n                playerState: action.snippet\r\n            };\r\n\r\n        case \"setRelatedVideoSourceId\":\r\n            return {\r\n                ...state,\r\n                relatedVideoSourceId: action.snippet\r\n            };\r\n        case \"setSearchKeyValue\":\r\n            return {\r\n                ...state,\r\n                searchKey: action.snippet\r\n            };\r\n        case \"setSearchResult\":\r\n            return{\r\n                ...state,\r\n                searchResult: action.snippet\r\n            };\r\n        case \"setNextSong\":\r\n            return{\r\n                ...state,\r\n                nextTrack: action.snippet\r\n            };\r\n        case \"setPreviousSong\":\r\n            return{\r\n                ...state,\r\n                previousTrack: action.snippet\r\n            };\r\n        case \"setNextTrackId\":\r\n            return {\r\n                ...state,\r\n                nextTrackId: action.snippet\r\n            };\r\n        case \"setTrendingSongs\":\r\n            return {\r\n                ...state,\r\n                trendingSongs: action.snippet\r\n            };\r\n        case \"setPickedSongs\":\r\n            return {\r\n                ...state,\r\n                pickedSongs: action.snippet\r\n            };\r\n\r\n\r\n        case \"setStore\":\r\n            return action.snippet;\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const ContextWrapper = (props) => {\r\n\t\r\n\t// const [ actions, setActions ] = useState({\r\n\t// \taddSource: mimeType => setStore({ ...store, sourceBuffer: store.mediaSource.addSourceBuffer(mimeType) }),\r\n\r\n    //     addTrackDetails: details => setStore({ ...store, trackDetails: details}),\r\n\r\n    //     addTestprop: prop => setStore({ ...store, testProp: prop})\r\n\r\n\t// });\r\n\t\r\n    const globalStore = useReducer(reducer, store);\r\n\r\n\treturn (\r\n\t\t<AppContext.Provider value={ globalStore }>\r\n\t\t\t{props.children}\r\n\t\t</AppContext.Provider>\r\n\t);\r\n}","import React, { useContext, useEffect } from 'react'\r\nimport { AppContext } from '../../context/AppContext'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {Link} from 'react-router-dom'\r\nimport './MiniPlayer.css';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nexport default function MiniPlayer() {\r\n\r\n    // const context = useContext(AppContext)\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        // console.log(context)\r\n    }, [context.currentSongDetails])\r\n    \r\n    function playAudio(e){\r\n        e.stopPropagation()\r\n        if (context.audioState === \"playing\"){\r\n            //  setIsPlaying(false);\r\n             context.me.pause();\r\n            //  span.innerHTML = 'play_arrow'\r\n             dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n           }\r\n           else if(context.audioState === \"paused\"){\r\n            //  setIsPlaying(true);\r\n             context.me.play()\r\n            //  span.innerHTML = 'pause'\r\n             dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n           }\r\n           else if(context.audioState === \"error\"){\r\n            dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n           }\r\n    }\r\n\r\n    function setPlayerApperance(e){\r\n        PlayerService.setPlayerApperance(e, \"max\")\r\n        setTimeout(() => {\r\n            dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n            history.push(`/player1/${context?.currentSongDetails?.videoId}`)}\r\n            , 200); \r\n    }\r\n\r\n    function openPlayer(e){\r\n        e.preventDefault()\r\n        // console.log(document.getElementsByClassName(\"mini-player\")[0])\r\n        // document.getElementsByClassName(\"mini-player\")[0].style.height = '50vh'\r\n        // document.getElementsByClassName(\"mini-player\")[0].style.transform = 'translateY(calc(-300%))'\r\n        dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: context?.currentSongDetails?.videoId,\r\n            trackTitle: context?.currentSongDetails?.trackTitle,\r\n            albumArtUrl: context?.currentSongDetails?.albumArtUrl,\r\n        }})\r\n        //dispatch({type: \"setPlayerState\", snippet: \"max\"})\r\n        setPlayerApperance(e)\r\n    }\r\n\r\n    function setPlayButton(){\r\n        switch(context.audioState){\r\n          case \"paused\":\r\n            return \"play_arrow\"\r\n          case \"playing\":\r\n            return \"pause\"\r\n          case \"error\":\r\n            return \"music_off\"\r\n          default:\r\n            return \"play_arrow\"\r\n        }\r\n      }\r\n\r\n    return (\r\n        <div className=\"mini-player\" onClick={(e) => {openPlayer(e)}}>\r\n            {/* <div className=\"main-container\"> */}\r\n                <div class=\"album-art image-box\">\r\n                    <img src={context?.currentSongDetails?.albumArtUrl} alt=\"album art\" />\r\n                </div>\r\n            \r\n                {/* <div className=\"album-art\"> */}\r\n                    {/* <img src=\"https://i.ytimg.com/vi/rpIlP6pI8fo/hqdefault.jpg?sqp=-oaymwEiCKgBEF5IWvKriqkDFQgBFQAAAAAYASUAAMhCPQCAokN4AQ==&rs=AOn4CLC3RB_yAndw0DHdAadz4bl1wNC12w\"/> */}\r\n                    {/* <img src={context?.currentSongDetails?.albumArtUrl} />  */}\r\n                {/* </div> */}\r\n                \r\n                <div id=\"scroll-container\">\r\n                    <div id=\"scroll-text\">{context?.currentSongDetails?.trackTitle}</div>\r\n                </div>\r\n                {/* <div className=\"title\">\r\n                    {\r\n                    <Link  to= \r\n                    {{\r\n                        pathname :`/player1/${context.currentSongDetails?.videoId}`,\r\n                        // state : {\r\n                        //     albumArtUrl: r?.thumbnails[0].url,\r\n                        //     videoId: r?.videoId,\r\n                        //     title: r?.title\r\n                        // }\r\n                    }}>\r\n                        }\r\n                    <h4>{context.currentSongDetails?.trackTitle}</h4>\r\n                    {/* </Link> \r\n                    </div> */}\r\n                {context.bufferState === \"loading\" ?\r\n                <div><CircularProgress /></div> :\r\n                <div style={{\"display\": \"flex\", \"justifyContent\": \"center\", \"flexDirection\": \"column\" }}>\r\n                <button onClick={(e) => {playAudio(e)}}>\r\n                    <span className=\"material-icons\">{setPlayButton()}</span>\r\n                    </button>\r\n                </div>\r\n                }       \r\n            {/* </div> */}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport './RelatedVideos.css';\r\nimport {Link} from 'react-router-dom'\r\nimport { AppContext } from '../../context/AppContext';\r\nimport { Accordion, CircularProgress } from '@material-ui/core';\r\nimport PlayerService from '../../services/PlayerService';\r\n\r\nfunction RelatedVideos(props){\r\n\r\n    const [relatedVideos, setRelatedVideos] = useState();\r\n    const [toggleAccordian, setToggleAccordian] = useState(true);\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      if (context.relatedVideoSourceId !== context.currentSongDetails?.videoId){\r\n        console.log(\"related videos effect\")\r\n        setLoading(true);\r\n        getRelatedVideos(context.currentSongDetails?.videoId)\r\n        .then(async (res) => {\r\n            let videos = await res.json();\r\n            dispatch({type: \"setRelatedVideos\", snippet: videos});\r\n            dispatch({type: \"setNextTrackId\", snippet: videos[0]?.videoId});\r\n            dispatch({type: \"setNextTrack\", snippet: {\r\n              videoId: videos[0]?.videoId,\r\n              trackTitle: videos[0]?.title,\r\n              albumArtUrl: videos[0]?.thumbnails.at(-1).url,\r\n            }});\r\n            dispatch({type: \"setRelatedVideoSourceId\", snippet: context.currentSongDetails?.videoId});\r\n            setRelatedVideos([...videos]);\r\n            setLoading(false);\r\n        })\r\n      }\r\n      else{\r\n        setRelatedVideos(context.relatedVideos);\r\n      }\r\n      \r\n    }, [context.currentSongDetails?.videoId])\r\n\r\n    function getRelatedVideos(videoId){\r\n        return fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/related-videos?videoId=${videoId}`, {\r\n          //`http://192.168.0.103:3003/api/related-videos?videoId=${videoId}`, {\r\n          headers: {\r\n            \"Accept\": \"application/json\",\r\n            'Content-Type': 'application/json',\r\n            'Access-Control-Allow-Origin': '*'\r\n          },\r\n        });\r\n    }\r\n\r\n    function trackChange(r){\r\n        console.log(\"track change cleanup\")\r\n\r\n    //   mediaSource.endOfStream()\r\n      console.log(context.mediaSource?.sourceBuffers[0])\r\n    //   mediaSource?.sourceBuffers[0].abort();\r\n      try{\r\n        context.mediaSource.removeSourceBuffer(context.store.mediaSource?.sourceBuffers[0]);\r\n      console.log(context.mediaSource?.sourceBuffers[0])\r\n      }\r\n\r\n      catch(e){\r\n        //   console.log(e)\r\n      }\r\n\r\n      dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n      dispatch({type: \"setCurrentSong\", snippet: {\r\n        videoId: r?.videoId,\r\n        trackTitle: r?.title,\r\n        albumArtUrl: r?.thumbnails.at(-1).url,\r\n    }})\r\n\r\n      if (document.getElementById(\"buffered-amount\") != null || undefined)\r\n        document.getElementById(\"buffered-amount\").style.width = \"0%\";\r\n\r\n      if(document.getElementById(\"progress-amount\") != null || undefined)\r\n        document.getElementById(\"progress-amount\").style.width = \"0px\";\r\n\r\n     if(document.getElementById(\"progress-scrub\") != null || undefined)\r\n        document.getElementById(\"progress-scrub\").style.left = \"0px\";\r\n\r\n      context.me.removeAttribute('src');\r\n      context.me.load();\r\n\r\n      \r\n      setAudioSource(r?.videoId).then(() => {\r\n        console.log(\"track loaded\")\r\n        dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n      })\r\n\r\n      //setSource(context.currentSongDetails?.videoId);\r\n      // setSource(r?.videoId).then(() => {\r\n      //   console.log(\"track loaded\")\r\n      //   dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n      // })\r\n    }\r\n\r\n    async function setAudioSource(videoId){\r\n      // await PlayerService.setAudioSource(videoId, context); //Player 2\r\n      await PlayerService.setAudioUrl(videoId, context); //Player 3\r\n  }\r\n    async function setSource(videoId){\r\n      await PlayerService.setSource(videoId, context);\r\n  }\r\n\r\n  function openRelatedVideos(e){\r\n    e.preventDefault()\r\n    setToggleAccordian(!toggleAccordian)\r\n    if (toggleAccordian)\r\n      document.getElementsByClassName(\"relatedVideosContainer\")[0].style.height = '50vh'\r\n    else\r\n    document.getElementsByClassName(\"relatedVideosContainer\")[0].style.height = '0vh'\r\n    //     document.getElementsByClassName(\"relatedVideosContainer\")[0].style.transform = 'translateY(calc(-100%))'\r\n  }\r\n\r\n    return(\r\n        <div className=\"relatedVideos\">\r\n        <div className=\"accordian-header\" onClick={(e) => openRelatedVideos(e)}>\r\n          <p style={{\"width\": \"200%\", fontSize: \"18px\"}}><b>Related Songs</b></p>\r\n          <i className=\"material-icons\">{toggleAccordian ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}</i>\r\n          </div>\r\n        \r\n        <div className=\"relatedVideosContainer\">{ \r\n          loading ? <CircularProgress /> :\r\n            relatedVideos?.map((r) =>{\r\n                // console.log(r?.snippet?.thumbnails)\r\n                return(\r\n                // <li key={r?.id?.videoId}>\r\n                  <div key={r?.videoId} className=\"related-list-item\">\r\n                    <Link className=\"related-list-item-detail\" onClick={() => {trackChange(r)}} to= \r\n                    {{\r\n                        pathname :`/player1/${r?.videoId}`,\r\n                        // state : {\r\n                        //     albumArtUrl: r?.thumbnails[0].url,\r\n                        //     videoId: r?.videoId,\r\n                        //     title: r?.title\r\n                        // }\r\n                    }}>\r\n                        {/* <div className=\"list-item\"> */}\r\n                    <img alt='' src={r?.thumbnails.at(-1).url}></img>\r\n                    <div>\r\n                    {r?.title}  \r\n                    </div>\r\n                        {/* </div> */}\r\n                    </Link>\r\n                  </div>\r\n                );\r\n            })\r\n            }</div>\r\n            </div>\r\n    );\r\n\r\n}\r\n\r\nexport default RelatedVideos;","import React, { useContext, useEffect, useState } from 'react'\r\nimport { AppContext } from '../../context/AppContext'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {Link} from 'react-router-dom'\r\nimport './SeekBar.css';\r\nimport PlayerService from '../../services/PlayerService';\r\n\r\nexport default function SeekBar() {\r\n\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const [mousedownFired, setMouseDownFired] = useState(false);\r\n    var me = context.me;\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        // console.log(context)\r\n        me?.addEventListener('progress',  progress);\r\n        progress();\r\n        me?.addEventListener('timeupdate', timeupdate);\r\n        timeupdate();\r\n        document.getElementById('seekBar').addEventListener('mouseover', (e) =>{\r\n            document.getElementById(\"progress-scrub\").style.display = 'block'\r\n        })\r\n\r\n        document.getElementById('seekBar').addEventListener('mouseout', (e) =>{\r\n            document.getElementById(\"progress-scrub\").style.display = 'none'\r\n        })\r\n\r\n        return () => {\r\n\r\n            me?.removeEventListener('progress', progress);\r\n            me?.removeEventListener('timeupdate', timeupdate);\r\n            // document.getElementById('seekBar').removeEventListener('mouseover')\r\n            // document.getElementById('seekBar').removeEventListener('mouseout')\r\n            // dispatch({type: \"setPlayerState\", snippet: \"min\"})\r\n          }\r\n    }, [])\r\n\r\n    function progress(){\r\n        console.log('add to buffer')\r\n        var duration =  me.duration;\r\n        if (me.duration > 0) {\r\n          for (var i = 0; i < me.buffered.length; i++) {\r\n                if (me.buffered.start(me.buffered.length - 1 - i) < me.currentTime) {\r\n                    document.getElementById(\"buffered-amount\").style.width = (me.buffered.end(me.buffered.length - 1 - i) / duration) * 100 + \"%\";\r\n                    // me.play()\r\n                    // console.clear()\r\n                    console.log(\"Buffering =>\" ,((me.buffered.end(me.buffered.length - 1 - i) / me.duration) * 100).toFixed(0) + \"%\")\r\n                    // break;\r\n                }\r\n            }\r\n        }\r\n       }\r\n\r\n       function timeupdate(){\r\n        var duration =  me.duration;\r\n        if (duration > 0) {\r\n          document.getElementById('progress-amount').style.width = ((me.currentTime / duration)*100) + \"%\";\r\n          document.getElementById('progress-scrub').style.left = (me.currentTime / duration)*100 + \"%\";\r\n        }\r\n       }\r\n\r\n    function moveThumb(e){\r\n        e.preventDefault();\r\n       if (mousedownFired) {\r\n         setMouseDownFired(false);\r\n         return;\r\n       }\r\n       console.log(\"click\")\r\n       me.pause()\r\n       \r\n       console.log(document.getElementById('progress-scrub').offsetWidth)\r\n      \r\n       // let shiftX = e.clientX - document.getElementById('progress-scrub').getBoundingClientRect().left;\r\n       let newLeft = e.clientX - document.getElementById('seekBar').getBoundingClientRect().left;\r\n      \r\n             // the pointer is out of slider => lock the thumb within the bounaries\r\n             if (newLeft < 0) {\r\n               newLeft = 0;\r\n             }\r\n             let rightEdge = document.getElementById('seekBar').offsetWidth + document.getElementById('progress-scrub').offsetWidth;\r\n             if (newLeft > rightEdge) {\r\n               newLeft = rightEdge;\r\n             }\r\n      \r\n             document.getElementById('progress-scrub').style.left = newLeft + 'px';\r\n             document.getElementById('progress-amount').style.width = newLeft + 'px';\r\n             console.log(me.duration)\r\n             console.log((newLeft/document.getElementById('seekBar').clientWidth) *me.duration)\r\n             \r\n      \r\n             me.currentTime = (newLeft/document.getElementById('seekBar').clientWidth) *me.duration;\r\n             if(context.audioState === \"playing\"){\r\n               me.play()\r\n             }\r\n      }\r\n  \r\n       \r\n    function onMouseDown(e){\r\n        console.log(\"md\")\r\n        if (context.audioState === \"playing\"){\r\n        me.pause()\r\n        // setIsPlaying(false)\r\n        }\r\n        // me.pause()\r\n        // e.stopPropagation();\r\n        e.preventDefault(); // prevent selection start (browser action)\r\n        \r\n        let shiftX = e.clientX - document.getElementById('progress-scrub').getBoundingClientRect().left;\r\n        // shiftY not needed, the thumb moves only horizontally\r\n    \r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    \r\n        function onMouseMove(event) {\r\n            let newLeft = event.clientX - shiftX - document.getElementById('seekBar').getBoundingClientRect().left;\r\n    \r\n            // the pointer is out of slider => lock the thumb within the bounaries\r\n            if (newLeft < 0) {\r\n            newLeft = 0;\r\n            }\r\n            let rightEdge = document.getElementById('seekBar').offsetWidth + document.getElementById('progress-scrub').offsetWidth;\r\n            if (newLeft > rightEdge) {\r\n            newLeft = rightEdge;\r\n            }\r\n    \r\n            document.getElementById('progress-scrub').style.left = newLeft + 'px';\r\n            document.getElementById('progress-amount').style.width = newLeft + 'px';\r\n            console.log(document.getElementById('seekBar').offsetWidth)\r\n            me.currentTime = (newLeft/document.getElementById('seekBar').offsetWidth) *me.duration;\r\n        }\r\n    \r\n        function onMouseUp() {\r\n            console.log(\"mup\");\r\n            setMouseDownFired(true);\r\n            if(context.audioState === \"playing\"){\r\n            me.play();\r\n            }\r\n            \r\n            document.removeEventListener('mouseup', onMouseUp);\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <div id=\"seekBar\" className=\"seekBar\" onClick={moveThumb}>\r\n            <span id=\"buffered-amount\"></span>\r\n            <div id=\"progress-amount\"></div>\r\n            <div onDragStart={() => false} onTouchStart={onMouseDown} onMouseDown={onMouseDown} id=\"progress-scrub\"></div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport './Player3.css';\r\nimport {useParams, useHistory} from 'react-router-dom'\r\n import LinearProgress from '@material-ui/core/LinearProgress';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport {Link} from 'react-router-dom';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport SeekBar from '../SeekBar/SeekBar';\r\nimport createBreakpoints from '@material-ui/core/styles/createBreakpoints';\r\nimport { Button, IconButton } from '@material-ui/core';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nfunction Player3() {\r\n  const { videoId } = useParams();\r\n  const history = useHistory();\r\n  //var me = document.createElement('audio');\r\n  //var mediaSource\r\n    // console.log(props);\r\n    const [context, dispatch] = useContext(AppContext)\r\n    var me = context.me;\r\n    const [loading, setLoading] = useState(false);\r\n    const [songDuration, setSongDuration] = useState(0);\r\n    const [seekbarDuration, setSeekbarDuration] = useState(0);\r\n    // const [dm, setdm] = \r\n    // const [ds, setds] = useState(0);\r\n    // const [cm, setcm] = useState(0);\r\n    // const [cs, setcs] = useState(0);\r\n    \r\n    useEffect(() => {\r\n        window.onpopstate = () =>{\r\n            history.push(\"/\");\r\n        }\r\n    })\r\n   \r\n    useEffect(() => {\r\n      // setLoading(true)\r\n      console.log('use effect')\r\n      console.log(videoId)\r\n      //document.getElementsByTagName('audio').src = `${process.env.REACT_APP_API_BASE_URL}/download-video-ytdl-tester?path=https://www.youtube.com/watch?v=${videoId}`\r\n      console.log(console.log(context.currentSongDetails))\r\n      console.log(Object.keys(context.currentSongDetails).length)\r\n      if (Object.keys(context.currentSongDetails).length == 0)\r\n      {\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n\r\n        PlayerService.getVideoInfo(videoId).then((r) => {\r\n\r\n          console.log(r?.thumbnails[r?.thumbnails?.length - 1]?.url)\r\n          dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: videoId,\r\n            trackTitle: r?.title,\r\n            albumArtUrl: r?.thumbnails[r?.thumbnails?.length - 1]?.url,\r\n        }});\r\n        PlayerService.setAudioUrl(videoId, context).then(() => {\r\n              \r\n              fetch(context.me.src).then(() => {\r\n                dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                context.me.play()\r\n              })\r\n              .catch(err => {\r\n                dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n              })\r\n              \r\n        })\r\n      });\r\n      }\r\n\r\n\r\n      me?.addEventListener('loadedmetadata', loadedmetadata);\r\n      me?.addEventListener('progress',  progress);\r\n      me?.addEventListener('timeupdate', timeupdate);\r\n\r\n      setNotificationLabel();\r\n      setSeekbarDuration(me?.currentTime);\r\n      setSongDuration(me?.duration);\r\n      dispatch({type: \"setPlayerState\", snippet: \"max\"})\r\n\r\n      // Clean Up\r\n    return () => {\r\n\r\n      me?.removeEventListener('progress', progress);\r\n      me?.removeEventListener('timeupdate', timeupdate);\r\n      dispatch({type: \"setPlayerState\", snippet: \"min\"})\r\n     \r\n    }\r\n   }, [context.currentSongDetails]);\r\n  \r\n\r\n   function playAudio(e){\r\n    e.preventDefault();\r\n\r\n    console.log(context.audioState)\r\n\r\n    switch(context.audioState){\r\n      case \"playing\":\r\n        dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n        break;\r\n      case \"paused\":\r\n        dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n        break;\r\n      case \"error\":\r\n        dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n        break;\r\n\r\n    }\r\n  }\r\n   \r\n   function loadedmetadata(){\r\n    // console.log(\"loadmetadata\")\r\n    setSongDuration(me.duration)\r\n    // setdm(parseInt((me.duration / 60) % 60))\r\n\r\n    if(me.duration > 0){\r\n      setSeekbarDuration(me.currentTime)\r\n      // setcm(parseInt((me.currentTime / 60) % 60))\r\n    }\r\n    setLoading(false)\r\n    dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n    \r\n   }\r\n\r\n   function progress(){\r\n    // console.log(\"progress\")\r\n    console.log('add to buffer')\r\n    var duration =  me.duration;\r\n    if (me.duration > 0) {\r\n      for (var i = 0; i < me.buffered.length; i++) {\r\n            if (me.buffered.start(me.buffered.length - 1 - i) < me.currentTime) {\r\n                //document.getElementById(\"buffered-amount\").style.width = (me.buffered.end(me.buffered.length - 1 - i) / duration) * 100 + \"%\";\r\n                // me.play()\r\n                // console.clear()\r\n                console.log(\"Buffering =>\" ,((me.buffered.end(me.buffered.length - 1 - i) / me.duration) * 100).toFixed(0) + \"%\")\r\n                // break;\r\n            }\r\n        }\r\n    }\r\n   }\r\n\r\n   function timeupdate(){\r\n    // console.log(\"timeupdate\")\r\n    var duration =  me.duration;\r\n    setSongDuration(me.duration)\r\n    // setdm(parseInt((me.duration / 60) % 60))\r\n\r\n    if (duration > 0) {\r\n      setSeekbarDuration(me.currentTime)\r\n      // setcm(parseInt((me.currentTime / 60) % 60))\r\n      //document.getElementById('progress-amount').style.width = ((me.currentTime / duration)*100) + \"%\";\r\n      //document.getElementById('progress-scrub').style.left = (me.currentTime / duration)*100 + \"%\";\r\n    }\r\n   }\r\n\r\n   function setNotificationLabel(){\r\n\r\n    if ('mediaSession' in navigator) {\r\n      console.log(\"media session works\")\r\n    navigator.mediaSession.metadata = new window.MediaMetadata({\r\n      title: context.currentSongDetails.trackTitle,\r\n      artwork: [\r\n        {\r\n          src: context.currentSongDetails.albumArtUrl == null || undefined ? '' : context.currentSongDetails.albumArtUrl,\r\n          sizes: '512x512',\r\n          type: 'image/png',\r\n        },\r\n      ],\r\n    })\r\n\r\n    navigator.mediaSession.setActionHandler('play', function() { dispatch({type: \"setAudioState\", snippet: \"playing\"}) });\r\n    navigator.mediaSession.setActionHandler('pause', function() { dispatch({type: \"setAudioState\", snippet: \"paused\"}) });\r\n  }\r\n   }\r\n    \r\n    \r\n    \r\n  function playAudio(e){\r\n    e.preventDefault();\r\n\r\n    console.log(context.audioState)\r\n\r\n    switch(context.audioState){\r\n      case \"playing\":\r\n        dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n        break;\r\n      case \"paused\":\r\n        dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n        break;\r\n      case \"error\":\r\n        dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n        break;\r\n\r\n    }\r\n  }\r\n\r\n  function changeTrack(trackSelect){\r\n    //e.preventDefault();\r\n    console.log(trackSelect);\r\n    console.log(context.currentSongDetails)\r\n    switch(trackSelect){\r\n      case \"prev\":\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n      dispatch({type: \"setCurrentSong\", snippet: context.currentSongDetails})\r\n\r\n      if (document.getElementById(\"buffered-amount\") != null || undefined)\r\n        document.getElementById(\"buffered-amount\").style.width = \"0%\";\r\n\r\n      if(document.getElementById(\"progress-amount\") != null || undefined)\r\n        document.getElementById(\"progress-amount\").style.width = \"0px\";\r\n\r\n     if(document.getElementById(\"progress-scrub\") != null || undefined)\r\n        document.getElementById(\"progress-scrub\").style.left = \"0px\";\r\n\r\n      context.me.removeAttribute('src');\r\n      context.me.load();\r\n\r\n      \r\n      PlayerService.setAudioUrl(context?.currentSongDetails?.videoId, context).then(() => {\r\n        console.log(\"track loaded\")\r\n        dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n      });\r\n\r\n        break;\r\n      case \"next\":\r\n        // dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n        // setTimeout(() => {\r\n        //   history.push(`/player1/${context?.nextTrackId}`)\r\n        //   history.go(0)\r\n        // }, 200)\r\n        dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n        PlayerService.getVideoInfo(context?.nextTrackId).then((r) => {\r\n\r\n          console.log(r?.thumbnails[r?.thumbnails?.length - 1]?.url)\r\n          dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: context?.nextTrackId,\r\n            trackTitle: r?.title,\r\n            albumArtUrl: r?.thumbnails[r?.thumbnails?.length - 1]?.url,\r\n        }});\r\n        PlayerService.setAudioUrl(context?.nextTrackId, context).then(() => {\r\n              \r\n              fetch(context.me.src).then(() => {\r\n                dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                context.me.play()\r\n                dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n              })\r\n              .catch(err => {\r\n                dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n              })\r\n              \r\n        })\r\n      });\r\n        break;\r\n      default: break;\r\n    }\r\n\r\n  }\r\n\r\n \r\n\r\n    // function setPlayerState(e){\r\n    //   PlayerService.setPlayerApperance(e, \"min\")\r\n    //   dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n    //   setTimeout(() => history.push(\"/\"), 150);\r\n    // }\r\n \r\n\r\n  return (\r\n\r\n    <div className=\"playerContainer\">\r\n      \r\n      \r\n    {/* <div className=\"bgImg\" style={{backgroundImage: `url(${context?.currentSongDetails?.albumArtUrl})`}}></div> */}\r\n    <div className=\"Player\">\r\n        <div className=\"AlbumArt\" >\r\n            <img src={context?.currentSongDetails?.albumArtUrl} />\r\n        </div>\r\n        \r\n        <div className=\"scroll-container\">\r\n            <div id=\"scroll-text\">{context?.currentSongDetails?.trackTitle}</div>\r\n        </div>\r\n\r\n        {/* <div>\r\n        <h4> {context?.currentSongDetails?.trackTitle} </h4> \r\n        </div> */}\r\n        <SeekBar />\r\n        <div id=\"timeLine\">\r\n        <div>{loading ? \"0:00\" : parseInt((seekbarDuration / 60) % 60).toString() + \":\" +parseInt(seekbarDuration % 60).toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}</div>\r\n        <div>{loading ? \"0:00\" : parseInt((songDuration / 60) % 60).toString() + \":\" +parseInt(songDuration % 60).toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}</div>\r\n        </div>\r\n        {/* <div className=\"Seekbar\"> */}\r\n        {/* <audio controls crossOrigin=\"anonymous\" id=\"audio\">\r\n          <source id=\"source\">\r\n          </source>\r\n        </audio> */}\r\n        \r\n        {/* <Slider value={context.me?.currentTime} max={context.me?.duration} aria-labelledby=\"continuous-slider\" >\r\n        <span id=\"buffered-amount\"></span>\r\n          </Slider> */}\r\n          <div className='player-controls'>\r\n        { context.bufferState === \"loading\" ?\r\n          <div><CircularProgress /></div>\r\n        :\r\n          <div style={{'display' : 'flex', 'flexDirection': 'row', 'justifyContent': 'space-evenly', 'alignItems': 'center'}}>\r\n\r\n          <button onClick={() => {changeTrack(\"prev\")}}>\r\n          <span id=\"playbtn\" className=\"material-icons\">skip_previous</span>\r\n          </button>\r\n\r\n          <IconButton style={{'border' : 'solid', 'backgroundColor': 'salmon'}} onClick={playAudio}>\r\n          <span id=\"playbtn\" className=\"material-icons\">{\r\n            setPlayButton()\r\n          // context.audioState === \"paused\" ? \"play_arrow\" : \"pause\"\r\n          }</span>\r\n          </IconButton>\r\n          \r\n          <button onClick={() => {changeTrack(\"next\")}}>\r\n          <span id=\"playbtn\" className=\"material-icons\">skip_next</span>\r\n          </button>\r\n          </div>\r\n        }\r\n        </div>\r\n        \r\n        \r\n        \r\n        \r\n        \r\n    </div>\r\n    </div>\r\n\r\n\r\n\r\n  \r\n\r\n  );\r\n\r\n  function playerMinimize(){\r\n    document.getElementsByClassName('playerContainer')[0].style.transform = 'translateY(calc(100% - 106px))';\r\n    dispatch({type: \"setPlayerState\", snippet: \"min\"})\r\n  }\r\n\r\n  function setPlayButton(){\r\n    switch(context.audioState){\r\n      case \"paused\":\r\n        return \"play_arrow\"\r\n      case \"playing\":\r\n        return \"pause\"\r\n      case \"error\":\r\n        return \"music_off\"\r\n      default:\r\n        return \"play_arrow\"\r\n    }\r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Player3;","import React, { useContext, useEffect } from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport './PlayerPage.css';\r\nimport RelatedVideos from '../../components/RelatedVideos/RelatedVideos';\r\nimport Player3 from '../../components/Player3/Player3';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport PlayerService from '../../services/PlayerService';\r\n// import Player1 from '../../components/Player1/Player1';\r\n\r\n\r\nfunction PlayerPage(props){\r\n\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const history = useHistory();\r\n    var xDown = null;                                                        \r\n    var yDown = null;\r\n\r\n    // console.log(props)\r\n\r\n    useEffect(() => {\r\n        // document.addEventListener('touchstart', handleTouchStart, false);        \r\n        // document.addEventListener('touchmove', handleTouchMove, false);\r\n        //document.addEventListener('touchend', handleTouchEnd, false); \r\n        \r\n        return ()=>{\r\n            // document.removeEventListener('touchstart', handleTouchStart, false);        \r\n            // document.removeEventListener('touchmove', handleTouchMove, false);\r\n            //document.removeEventListener('touchend', handleTouchEnd, false); \r\n        }\r\n    })\r\n\r\n    function setPlayerState(e){\r\n        PlayerService.setPlayerApperance(e, \"min\")\r\n        dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n        setTimeout(() => history.push(\"/\"), 150);\r\n      }\r\n\r\n      \r\n\r\n\r\n\r\nfunction getTouches(evt) {\r\n  return evt.touches ||             // browser API\r\n         evt.originalEvent.touches; // jQuery\r\n}                                                     \r\n                                                                         \r\nfunction handleTouchStart(evt) {\r\n    const firstTouch = getTouches(evt)[0];                                      \r\n    xDown = firstTouch.clientX;                                      \r\n    yDown = firstTouch.clientY;                                      \r\n};                                                \r\n                                                                         \r\nfunction handleTouchMove(evt) {\r\n    if ( ! xDown || ! yDown ) {\r\n        return;\r\n    }\r\n\r\n    var xUp = evt.touches[0].clientX;                                    \r\n    var yUp = evt.touches[0].clientY;\r\n\r\n    var xDiff = xDown - xUp;\r\n    var yDiff = yDown - yUp;\r\n                                                                         \r\n    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/\r\n        if ( xDiff > 0 ) {\r\n            /* right swipe */ \r\n        } else {\r\n            /* left swipe */\r\n        }                       \r\n    } else {\r\n        if ( yDiff > 0 ) {\r\n            /* down swipe */ \r\n            \r\n        } else { \r\n            /* up swipe */\r\n            console.log(\"down swipe\")\r\n            setPlayerState(evt)\r\n        }                                                                 \r\n    }\r\n    /* reset values */\r\n    xDown = null;\r\n    yDown = null;                                             \r\n};\r\n\r\nfunction handleTouchEnd(evt) {\r\n    const firstTouch = getTouches(evt)[0];                                      \r\n    xDown = firstTouch.clientX;                                      \r\n    yDown = firstTouch.clientY;                                      \r\n};  \r\n\r\n    return(\r\n        // <div>\r\n        <div className=\"PlayerPage\">\r\n            <button style={{ float: 'left'}} >\r\n            <Link onClick={(e) => {setPlayerState(e)}} style={{ textDecoration: 'none'}} to=\"/\" className=\"material-icons\">keyboard_arrow_down</Link>\r\n            </button>\r\n            {/* <Player1 props={props}/> */}\r\n            {/* <Player2 props={props}/> */}\r\n            <Player3 props={props}/>\r\n            {/* <br /> */}\r\n            <RelatedVideos props={props}/>\r\n        </div>\r\n        \r\n        // </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default PlayerPage;","import React, { useContext } from 'react';\r\nimport { useEffect, useState, useCallback} from 'react';\r\nimport './SearchPage.css';\r\nimport {Link, useHistory} from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport { AppContext } from '../../context/AppContext';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nfunction SearchPage(){\r\n\r\n    \r\n    const [searchItems, setSearchItems] = useState();\r\n    const [input, setInput] = useState();\r\n    const [searchLoader, setSearchLoader] = useState(false);\r\n    const [searchKey, setSearchKey] = useState(\"\");\r\n    const [context, dispatch] = useContext(AppContext)\r\n    const history = useHistory();\r\n    // const inputRef = useRef();\r\n    // const [suggestItems, setSuggestItems] = useState();\r\n\r\n    useEffect(() =>{\r\n        console.log(\"mount search\")\r\n        console.log(context.searchKey)\r\n        if(context?.searchResult?.length > 0 && context?.searchResult !== undefined | null){\r\n            setSearchItems(context.searchResult)\r\n        }\r\n        setSearchKey(context.searchKey)\r\n\r\n        return () => {\r\n            console.log(\"unmount search\")\r\n            console.log(searchItems)\r\n            console.log(searchKey)\r\n            dispatch({type: \"setSearchKeyValue\", snippet: searchKey});\r\n            dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        }\r\n    }, [context?.searchKey])\r\n\r\n    const debouncedChangeHandler = useCallback( _.debounce(searchSong, 400)  , []);\r\n    \r\n    return (\r\n        <div>\r\n            <h3>Search</h3>\r\n            <input type=\"text\" placeholder=\"Type Song Name, Lyrics, Movie/Album/Singer Name\" onChange={debouncedChangeHandler}/>\r\n            \r\n            {/* <ul>{ \r\n            suggestItems?.map((r) =>{\r\n                return <li key={r?.id?.videoId}>{r?.title}</li>\r\n            })\r\n            }</ul> */}\r\n            <div className='search-result-container'>{ searchLoader ? <div style={{paddingTop: '50%' }}><CircularProgress /></div> :\r\n            searchItems?.map((r) =>{\r\n                // console.log(r?.snippet?.thumbnails)\r\n                return(\r\n                // <li key={r?.id?.videoId}>\r\n                <div className=\"list-item\">\r\n                    <Link className='list-item-link' onClick={ (e) => {selectSong(e, r)} } key={r?.id?.videoId} to={`/player1/${r?.id?.videoId}`}>\r\n                        <img alt='' src={r?.snippet?.thumbnails?.default?.url} />\r\n                        <div>\r\n                            {r?.title}  \r\n                         </div>\r\n                    </Link>\r\n                </div>\r\n                );\r\n                // return <li onClick={playSong} key={r?.id?.videoId}>{r?.title}</li>\r\n            })\r\n            }</div>\r\n            {/* {\r\n                searchItems == null || undefined ? null : <Player videoId={searchItems[0]?.id?.videoId} />\r\n            } */}\r\n            \r\n        </div>\r\n    );\r\n\r\n// function playSong(event)\r\n// {\r\n//     console.log(event.target)\r\n// }\r\n\r\nfunction openPlayer(r){\r\n    if (context.playerState == null | undefined){\r\n        dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n        dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        setTimeout(() => history.push(`/player1/${r?.id?.videoId}`), 150);\r\n    }\r\n    else if (context.playerState === \"min\" ){\r\n        dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n    }\r\n    else if (context.playerState === \"max\" ){\r\n        dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n        dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        setTimeout(() => history.push(`/player1/${r?.id?.videoId}`), 150);\r\n    }\r\n}\r\n\r\n\r\nasync function selectSong(e, r){\r\n    e.preventDefault(); \r\n    context.me.removeAttribute('src');\r\n    context.me.load();\r\n    dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n    dispatch({type: \"setCurrentSong\", snippet: {\r\n        videoId: r?.id?.videoId,\r\n        trackTitle: r?.title,\r\n        albumArtUrl: r?.snippet?.thumbnails?.default?.url,\r\n    }});\r\n\r\n    // dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n\r\n    // setSource(r?.id?.videoId).then(() => {\r\n    //     console.log(\"track loaded\")\r\n    //     dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n    // })\r\n\r\n    setAudioSource(r?.id?.videoId).then(() => {\r\n        console.log(\"track loaded\")\r\n        dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n    })\r\n\r\n    openPlayer(r)\r\n    //await setSource(r?.id?.videoId);\r\n    \r\n}\r\n\r\n// async function setSource(videoId){\r\n//     await PlayerService.setSource(videoId, context);\r\n// }\r\n\r\nasync function setAudioSource(videoId){\r\n    // await PlayerService.setAudioSource(videoId, context); //Player 2\r\n    await PlayerService.setAudioUrl(videoId, context); //Player 3\r\n}\r\n\r\nfunction suggestSearch(event){\r\n    setSearchKey(event?.target?.value)\r\n    setSearchLoader(true);\r\n    console.log(event?.target?.value)\r\n\r\n}\r\nfunction searchSong(event){\r\n    setSearchKey(event?.target?.value)\r\n    setSearchLoader(true);\r\n    console.log(event?.target?.value)\r\n    setInput(event?.target?.value)\r\n    // inputRef.current(event?.target?.value)\r\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/search`, {\r\n        //'http://192.168.0.103:3003/api/search', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        searchKey : event?.target?.value\r\n      }),\r\n    })\r\n    .then(\r\n        async (res) => {\r\n            let response = await res.json()\r\n            console.log(response[0]?.id?.videoId)\r\n            setSearchItems([...response])\r\n            setSearchLoader(false)\r\n        }\r\n    )\r\n}\r\n}\r\n\r\nexport default SearchPage;","import React from 'react';\r\nimport './CardSlider.css';\r\nimport {Card, CardActionArea, CardMedia, Typography, CardContent} from '@material-ui/core'\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\n\r\nfunction CardSlider({items, handleClick}){\r\n\r\n    const[cardItems, setCardItems] = useState();\r\n    const [context, dispatch] = useContext(AppContext);\r\n\r\n    useEffect(() => {\r\n          console.log(\"card slider effect\")\r\n        //   console.log(items)\r\n          setCardItems(items);\r\n      }, [items])\r\n\r\n    return(\r\n        <div className=\"silderContainer\">\r\n            {\r\n                \r\n            cardItems?.map((item) =>{\r\n                return (\r\n            <Card key={item?.videoId} style={{'display' : 'inline-block', 'whiteSpace': 'pre-line' ,'width': '50%', 'height': '30vh', 'margin': '2.5%'}} >\r\n            <CardActionArea onClick={(e) => {handleClick(e, {videoId: item?.videoId, title: item?.title, imageUrl: item?.imageUrl})}}>\r\n                <CardMedia\r\n                component=\"img\"\r\n                height=\"140\"\r\n                image={item?.imageUrl}\r\n                alt=\"album art\"\r\n                style={{objectFit: 'fill'}}\r\n                />\r\n                <CardContent>\r\n                    {item?.title}\r\n                </CardContent>\r\n            </CardActionArea>\r\n            </Card>\r\n        )})\r\n        }\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default CardSlider;","import React from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport './HomePage.css';\r\nimport CardSlider from '../../components/CardSlider/CardSlider';\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport {Skeleton} from '@material-ui/lab';\r\nimport {Box} from '@material-ui/core'\r\nimport PlayerService from '../../services/PlayerService';\r\n\r\nfunction HomePage(props){\r\n\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const history = useHistory();\r\n    const [trendingItems, setTrendingItems] = useState();\r\n    const [pickedItems, setPickedItems] = useState();\r\n\r\n    useEffect(() => {\r\n        console.log(\"home page effect\")\r\n        // console.log(context)\r\n        if ((context?.trendingSongs == null ) && (context?.pickedSongs == null )){\r\n        getSearchResult(\"trending songs\").then(\r\n            async (res) => {\r\n                \r\n                let response = await res.json()\r\n                // console.log(response)\r\n                \r\n                let filteredResponse = response.filter(i => convertDurationToNumber(i?.duration_raw) <= 10 * 60)\r\n                .map((val) => {\r\n                    return {\r\n                    imageUrl: val?.snippet?.thumbnails?.high?.url,\r\n                    title: val?.title,\r\n                    videoId: val?.id?.videoId\r\n                    }\r\n                });\r\n                setTrendingItems(filteredResponse)\r\n                \r\n                dispatch({type: \"setTrendingSongs\", snippet: filteredResponse})\r\n            })\r\n\r\n        getSearchResult(\"malayalam trending songs\").then(\r\n            async (res) => {\r\n                let response = await res.json()\r\n\r\n                let filteredResponse = response.filter(i => convertDurationToNumber(i?.duration_raw) <= 10 * 60)\r\n                .map((val) => {\r\n                    return {\r\n                    imageUrl: val?.snippet?.thumbnails?.high?.url,\r\n                    title: val?.title,\r\n                    videoId: val?.id?.videoId\r\n                    }\r\n                });\r\n                \r\n                setPickedItems(filteredResponse)\r\n                dispatch({type: \"setPickedSongs\", snippet: filteredResponse})\r\n            })\r\n        }\r\n        else{\r\n            setTrendingItems(context.trendingSongs)\r\n            setPickedItems(context.pickedSongs)\r\n        }\r\n    }, [])\r\n\r\n    const convertDurationToNumber = (duration) => {\r\n        let arr = duration?.split(\":\");\r\n        let seconds = 0;\r\n        switch(arr?.length){\r\n            case 3:\r\n                seconds = (parseInt(arr[0], 10) * 60 * 60) + (parseInt(arr[1], 10) * 60) + parseInt(arr[2], 10); break;\r\n            case 2:\r\n                seconds = (parseInt(arr[0], 10) * 60) + parseInt(arr[1], 10); break; \r\n            case 1:\r\n                seconds = parseInt(arr[1], 10); break;\r\n            default: break;\r\n        }\r\n        return seconds;\r\n    }\r\n\r\n    function getSearchResult(searchKey){\r\n        return fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/search`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            searchKey :searchKey\r\n          }),\r\n        });\r\n    }\r\n\r\n    function getHomePageHTML(){\r\n        return {__html: \"<h1>Hello World</h1>\"}\r\n    }\r\n\r\n    function openPlayer(r){\r\n        if (context.playerState == null | undefined){\r\n            dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n            setTimeout(() => history.push(`/player1/${r?.videoId}`), 150);\r\n        }\r\n        else if (context.playerState === \"min\" ){\r\n            dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n        }\r\n        else if (context.playerState === \"max\" ){\r\n            dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n            setTimeout(() => history.push(`/player1/${r?.videoId}`), 150);\r\n        }\r\n    }\r\n\r\n    function selectSong(e, r){\r\n        e.preventDefault(); \r\n        context.me.removeAttribute('src');\r\n        context.me.load();\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n        dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: r?.videoId,\r\n            trackTitle: r?.title,\r\n            albumArtUrl: r?.imageUrl,\r\n        }});\r\n\r\n        setAudioSource(r?.videoId).then(() => {\r\n            console.log(\"track loaded\")\r\n            dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n        })\r\n\r\n        openPlayer(r)\r\n    }\r\n\r\n    async function setAudioSource(videoId){\r\n        // await PlayerService.setAudioSource(videoId, context); //Player 2\r\n        await PlayerService.setAudioUrl(videoId, context); //Player 3\r\n    }\r\n\r\n    const CardSkeleton = ({cardNumber}) => {\r\n        return (\r\n            <div style={{  display: 'flex',flexDirection: 'row' , justifyContent: 'space-evenly'}}>\r\n                {\r\n                     Array.from(\r\n                        { length: cardNumber },\r\n                        (_, i) => (\r\n                            <Box key={i} sx={{ pt: 0.5 }} style={{width: '100%', height:'30vh', margin: '2.5%'}}>\r\n                                <Skeleton variant=\"rect\" style={{width: '100%', height:'20vh'}} />\r\n                                <Skeleton />\r\n                                <Skeleton />\r\n                            </Box>\r\n                        )\r\n                    )\r\n                }\r\n                \r\n            </div> \r\n        )\r\n    }\r\n\r\n    return(\r\n        <div className=\"HomePage\">\r\n            <h3 >Welcome Back!</h3>\r\n            {/* <div dangerouslySetInnerHTML={getHomePageHTML()} /> */}\r\n            <h3 style={{'textAlign': 'left'}}>Trending Songs</h3>\r\n            \r\n            {trendingItems == null | undefined ? \r\n            <CardSkeleton cardNumber={2}/>\r\n            :\r\n            <CardSlider items={trendingItems} handleClick={selectSong} />\r\n            }\r\n            <h3 style={{'textAlign': 'left'}}>Picked for you</h3>\r\n            {pickedItems == null | undefined ? \r\n            <CardSkeleton cardNumber={2}/>\r\n            :\r\n            <CardSlider items={pickedItems} handleClick={selectSong} />\r\n            }\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default HomePage;","import PlayerPage from \"./pages/PlayerPage/PlayerPage\";\r\nimport SearchPage from \"./pages/SearchPage/SearchPage\";\r\nimport HomePage from \"./pages/HomePage/HomePage\";\r\n\r\nexport const routes = [\r\n    {\r\n      key: 'home',\r\n      component: HomePage,\r\n      path: '/',\r\n    },\r\n    {\r\n      key: 'search',\r\n      component: SearchPage,\r\n      path: '/search',\r\n    },\r\n    {\r\n      key: 'player',\r\n      component: PlayerPage,\r\n      path: '/player1/:videoId',\r\n    },\r\n  ];","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport { routes } from '../../Routes';\r\nimport './Footer.css'\r\n\r\nexport default function Footer() {\r\n\r\n\r\n    return (\r\n        <div className=\"footerContainer\">\r\n            <ul>\r\n                <li className='link-items'>\r\n                <Link className='link-items' to={routes.find(x => x.key == \"home\")?.path} >\r\n                    <span className=\"material-icons icon\">home</span>\r\n                    <span className='link-text'>Home</span>\r\n                </Link>\r\n                </li>\r\n\r\n                <li className='link-items'>\r\n                <Link className='link-items' to={routes.find(x => x.key == \"search\")?.path} >\r\n                    <span className=\"material-icons icon\">search</span>\r\n                    <span className='link-text'>Search</span>\r\n                </Link>\r\n                </li>\r\n\r\n                <li className='link-items'>\r\n                    <span className=\"material-icons icon\">download</span>\r\n                    <span className='link-text'>Downloads</span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n\r\n}","import React, { useContext, useEffect, useState } from 'react';\nimport './App.css';\nimport { Switch, Route, BrowserRouter} from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\n// import SuggestPage from './pages/SuggestPage/SuggestPage';\nimport MiniPlayer from './components/MiniPlayer/MiniPlayer';\nimport Footer from './components/Footer/Footer';\nimport Header from './components/Header/Header';\nimport { AppContext } from './context/AppContext';\nimport { routes } from './Routes';\nimport { Snackbar } from '@material-ui/core';\n\nfunction App() {\n\n  const [context, dispatch] = useContext(AppContext)\n  const [networkStatus, setNetworkStatus] = useState(true);\n  const location = useLocation();\n\n  useEffect(() => {\n    // console.log(window.location.pathname)\n    console.log(JSON.parse(window.localStorage.getItem('store')));\n    // dispatch({type: \"setStore\", snippet: JSON.parse(window.localStorage.getItem('store'))})\n    console.log('Environment ->', process.env.NODE_ENV);\n    console.log('Api base url ->', process.env.REACT_APP_API_BASE_URL);\n\n    window.addEventListener(\"online\", () => {setNetworkStatus(navigator.onLine)});\n    window.addEventListener(\"offline\", () => {setNetworkStatus(navigator.onLine)});\n    \n\n    return () => {\n      console.log(\"unmount\")\n      window.removeEventListener(\"online\", () => {setNetworkStatus(navigator.onLine)});\n      window.removeEventListener(\"offline\", () => {setNetworkStatus(navigator.onLine)});\n      window.localStorage.setItem('store', JSON.stringify(context));\n    }\n }, []);\n\n//   useEffect(() => {\n    \n//  },[context]);\n\n//  function setNotificationLabel(){\n\n//   if ('mediaSession' in navigator) {\n//     console.log(\"media session works\")\n//   navigator.mediaSession.metadata = new window.MediaMetadata({\n//     title: context.currentSongDetails.trackTitle,\n//     artwork: [\n//       {\n//         src: context.currentSongDetails.albumArtUrl == null || undefined ? '' : context.currentSongDetails.albumArtUrl,\n//         sizes: '512x512',\n//         type: 'image/png',\n//       },\n//     ],\n//   })\n// }\n// }\n\n \n  return (\n    \n    <div className=\"appContainer\">\n        {/* <Header /> */}\n        {/* { !location.pathname.includes(\"player1\") ? <Header /> : null} */}\n        <div className=\"appBody\">\n          <Switch>\n          {routes.map(props => <Route exact {...props} />)} \n          </Switch>\n        </div>\n\n        <div className='bottomContainer'>\n          {context.playerState === \"min\" ? <MiniPlayer /> : null}\n          \n          { !location.pathname.includes(\"player1\") ? <Footer /> : null}\n        </div>\n\n        <Snackbar \n        style={{'zIndex': 10000}}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n        message=\"No internet Connection\"\n        autoHideDuration={5000}\n        open={!networkStatus}\n        />\n\n    </div>\n    // </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import { BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport { ContextWrapper } from './context/AppContext';\nimport { BrowserRouter} from \"react-router-dom\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <ContextWrapper>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </ContextWrapper>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}